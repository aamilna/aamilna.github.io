<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AaMilNa â€¢ Shop</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,500;1,600&family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;}

body{
  font-family:'Poppins',sans-serif;
  background:#fff7f0;
  color:#4a3b47;
  overflow-x:hidden;
}

/* ðŸ”’ BACKGROUND (LOCKED) */
.bubble-bg{position:fixed;inset:0;z-index:-1;overflow:hidden;}
.bubble{
  position:absolute;width:260px;height:260px;border-radius:50%;
  background:radial-gradient(circle at top left,
    rgba(255,255,255,0.9),
    rgba(255,220,230,0.45),
    rgba(200,150,170,0.25));
  backdrop-filter:blur(6px);
  animation:float 30s infinite ease-in-out;
}
.bubble::after{
  content:"ðŸŒ¸";
  position:absolute;inset:0;
  display:flex;align-items:center;justify-content:center;
  font-size:70px;opacity:0.35;
}
.bubble:nth-child(1){top:10%;left:6%;}
.bubble:nth-child(2){top:55%;left:72%;}
.bubble:nth-child(3){top:30%;left:42%;}
@keyframes float{50%{transform:translateY(-60px);}}

/* HEADER */
header{
  padding:26px 50px;
  background:rgba(255,255,255,0.85);
  box-shadow:0 8px 25px rgba(0,0,0,0.08);
  display:flex;
  justify-content:space-between;
  align-items:center;
}
header h1{
  font-family:'Playfair Display',serif;
  font-style:italic;
}
header a{
  text-decoration:none;
  font-weight:500;
  color:#4a3b47;
}

/* SHOP */
.shop{
  max-width:1200px;
  margin:120px auto 80px;
  padding:0 30px;
}
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:30px;
}
.card{
  background:white;
  padding:22px;
  border-radius:26px;
  box-shadow:0 18px 40px rgba(0,0,0,0.12);
}
.card img{
  width:100%;
  height:190px;
  object-fit:cover;
  border-radius:18px;
  margin-bottom:10px;
}
.card button{
  margin-top:10px;
  width:100%;
  padding:10px;
  border:none;
  border-radius:14px;
  background:#e7b7c8;
  cursor:pointer;
  font-weight:500;
}
</style>
</head>

<body>

<div class="bubble-bg">
  <div class="bubble"></div>
  <div class="bubble"></div>
  <div class="bubble"></div>
</div>

<header>
  <h1>Shop</h1>
  <a href="cart.html">ðŸ›’ Cart</a>
</header>

<section class="shop">
  <div class="grid" id="shopGrid"></div>
</section>

<script>
const grid = document.getElementById("shopGrid");
const products = JSON.parse(localStorage.getItem("pendingProducts")) || [];
const approved = products.filter(p => p.status === "Approved");

function addToCart(product){
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  const existing = cart.find(i => i.name === product.name && i.artisanId === product.artisanId);

  if(existing){
    existing.qty += 1;
  } else {
    cart.push({
      name: product.name,
      price: product.price,
      image: product.image,      // âœ… IMAGE PASSED SAFELY
      artisanId: product.artisanId,
      artisanName: product.artisanName,
      qty: 1
    });
  }

  localStorage.setItem("cart", JSON.stringify(cart));
  alert("Added to cart");
}

if(approved.length === 0){
  grid.innerHTML = "<p>No products available.</p>";
}

approved.forEach((p,index)=>{
  const card = document.createElement("div");
  card.className = "card";

  card.innerHTML = `
    <img src="${p.image}">
    <h4>${p.name}</h4>
    <p>${p.price} PKR</p>
    <p>By ${p.artisanName}</p>
    <button>Add to Cart</button>
  `;

  card.querySelector("button").onclick = () => addToCart(p);
  grid.appendChild(card);
});
</script>

</body>
</html>


